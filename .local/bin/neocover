#!/bin/sh

song=$(mpc -f %file% current)
nsong=$(mpc -f %file% queued)

prep(){
	rm /tmp/neocover.png
	rm /tmp/dartc.png
	rm /tmp/dartn.png
	rm ~/.cache/thumbnails/neofetch/*neocover*
	return
}

getart(){
	ffmpeg -i "/home/dave/music/$song" /tmp/dartc.png &
	ffmpeg -i "/home/dave/music/$nsong" /tmp/dartn.png &
	wait
	return
}

nchk(){
	[ -f /tmp/dartc.png ] || cp ~/.config/wpg/.current /tmp/neocover.png
	[ -f /tmp/neocover.png ] || cp /tmp/dartc.png /tmp/neocover.png
	return
}

dchk(){
	[ -f /tmp/dartc.png ] || cp ~/.config/dunst/no_art.png /tmp/dartc.png
	[ -f /tmp/dartn.png ] || cp ~/.config/dunst/no_art.png /tmp/dartn.png
	return
}

prep
getart
nchk
dchk
return
